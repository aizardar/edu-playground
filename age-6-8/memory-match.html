<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Memory Match (Ages 6‚Äì8)</title>
<style>
  :root{
    --bg1:#FFFBF0; --bg2:#FFF0F5;
    --brand:#FF7AC8; --brand2:#7ACBFF;
    --ok:#2ecc71; --oops:#ff6b6b; --card:#ffffff; --ink:#2b2b2b; --muted:#6b7280;
    --tile:#ffffff; --tileBack:#e8f1ff;
  }
  html,body{margin:0;padding:0}
  body{
    font-family:"Comic Sans MS","Trebuchet MS",Arial,sans-serif;
    color:var(--ink);
    min-height:100vh;
    background: radial-gradient(circle at 20% 20%, var(--bg1), var(--bg2) 70%);
    display:flex; flex-direction:column; align-items:center;
  }

  /* Header */
  header{
    width:100%; text-align:center; color:#fff;
    background: linear-gradient(135deg, var(--brand), var(--brand2));
    padding:22px 16px; border-bottom-left-radius:20px; border-bottom-right-radius:20px;
    box-shadow:0 6px 18px rgba(0,0,0,.12);
  }
  header h1{ margin:0; font-size:1.9rem;}
  header p{ margin:6px 0 0; opacity:.95;}

  .wrap{ width:min(980px,94%); margin:22px auto; text-align:center; }

  /* Numeric progress: pairs 1‚Äì4 */
  .progress{ display:flex; justify-content:center; gap:10px; margin:6px 0 18px; }
  .p-num{
    width:36px; height:36px; line-height:36px; border-radius:10px;
    display:inline-block; font-weight:800; font-size:1rem;
    background:#fff; color:var(--muted); box-shadow:0 3px 10px rgba(0,0,0,.08);
    transition:.2s;
  }
  .p-num.done{ background:#eaf9f0; color:#1f8e54; }
  .p-num.current{ background:#e8f1ff; color:#1751aa; transform:scale(1.06); }

  /* Card container */
  .card{
    background:var(--card);
    border-radius:20px;
    box-shadow:0 10px 24px rgba(0,0,0,.12);
    padding:18px 16px 22px;
  }
  .q{ font-size:1.1rem; margin:0 0 14px; }

  /* Board */
  .board{
    width:min(680px,96%); margin:0 auto;
    display:grid; grid-template-columns: repeat(4, 1fr);
    gap:14px; justify-items:center; align-items:center;
    padding:16px;
    background: linear-gradient(180deg,#dff3ff,#ffffff 70%);
    border-radius:16px;
  }

  /* Tiles */
  .tile{
    width:130px; height:160px; perspective: 800px;
  }
  .flip{
    width:100%; height:100%; position:relative; border-radius:16px; cursor:pointer; user-select:none;
    transition: transform .5s; transform-style: preserve-3d;
  }
  .flip.flipped{ transform: rotateY(180deg); }
  .face{
    position:absolute; inset:0; border-radius:16px; backface-visibility:hidden;
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 8px 16px rgba(0,0,0,.12);
  }
  .front{ background:var(--tile); transform: rotateY(180deg); font-size:56px; }
  .back{ background:var(--tileBack); }
  .back::after{
    content:"?"; font-size:48px; color:#1751aa; font-weight:800; letter-spacing:1px;
  }
  .flip.matched .front{ background:#eaf9f0; }
  .flip.matched{ cursor:default; }

  .feedback{ min-height:1.6em; margin:12px 0 0; font-size:1.15rem; font-weight:700; }
  .ok{ color:var(--ok); } .oops{ color:var(--oops); }

  .bar{ display:flex; justify-content:center; gap:10px; margin-top:12px; flex-wrap:wrap; }
  .btn{
    border:none; color:#fff; font-weight:bold; letter-spacing:.5px;
    padding:12px 16px; border-radius:14px; cursor:pointer; font-size:1rem;
    background: linear-gradient(135deg, #FFB86B, #FF7AC8);
    box-shadow:0 8px 16px rgba(255,122,200,.28);
  }
  .btn.alt{ background: linear-gradient(135deg, #e0efff, #bcd9ff); color:#113f86; }

  footer{ margin:16px 0 26px; }
  footer a{ color:#1c66cc; text-decoration:none; font-weight:bold; }

  /* FULL-PAGE CONFETTI */
  .confetti-global{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:9999; }
  .confetti-global i{
    position:absolute; top:-10px; width:10px; height:14px; border-radius:2px;
    animation: fall 1.4s ease-in forwards; opacity:.95;
  }
  @keyframes fall{ to{ transform: translateY(110vh) rotate(260deg); opacity:0 } }

  /* Responsive */
  @media (max-width:720px){
    .tile{ width:100px; height:130px; }
    .front{ font-size:44px; }
    .board{ gap:10px; }
  }
</style>
</head>
<body>
  <!-- Full-page confetti -->
  <div class="confetti-global" id="confettiGlobal" aria-hidden="true"></div>

  <header>
    <h1>Memory Match</h1>
    <p>Flip two cards. Match the pictures!</p>
  </header>

  <main class="wrap">
    <!-- Numeric progress: pairs 1‚Äì4 -->
    <div class="progress" id="progress" aria-label="Match progress"></div>

    <section class="card" aria-live="polite">
      <div class="q">Find all the matching pairs:</div>
      <div class="board" id="board"></div>

      <div id="feedback" class="feedback"></div>

      <div class="bar">
        <button class="btn alt" onclick="resetGame()">üîÑ Reset</button>
      </div>
    </section>

    <footer>
      <a href="index.html">‚Üê Back to Ages 6‚Äì8</a>
    </footer>
  </main>

<script>
  // Emoji sets (pick one at random to keep it fresh)
  const SETS = [
    ["üê∂","üê±","üêº","ü¶ä"],
    ["üçé","üçä","üçá","üçì"],
    ["üöó","‚úàÔ∏è","üö≤","üöÄ"],
    ["‚öΩ","üèÄ","üéæ","üèà"],
  ];

  let first = null, lock = false, matches = 0, totalPairs = 4;
  const boardEl = document.getElementById('board');
  const fbEl = document.getElementById('feedback');
  const progressEl = document.getElementById('progress');
  const confettiGlobalEl = document.getElementById('confettiGlobal');

  function buildProgress(){
    progressEl.innerHTML = "";
    for(let i=0;i<totalPairs;i++){
      const s = document.createElement('span');
      s.textContent = (i+1);
      s.className = "p-num" + (i < matches ? " done" : i === matches ? " current" : "");
      progressEl.appendChild(s);
    }
  }

  function newGame(){
    first = null; lock = false; matches = 0; fb("");
    buildProgress();

    // Choose a set and make pairs
    const base = SETS[Math.floor(Math.random()*SETS.length)].slice(0,totalPairs);
    const deck = shuffle([...base, ...base]); // 8 cards

    boardEl.innerHTML = "";
    deck.forEach((symbol, idx) => {
      const tile = createTile(symbol, idx);
      boardEl.appendChild(tile);
    });
  }

  function createTile(symbol, id){
    const tile = document.createElement('div');
    tile.className = "tile";
    const flip = document.createElement('div');
    flip.className = "flip";
    flip.dataset.value = symbol;
    flip.dataset.id = id;

    const front = document.createElement('div');
    front.className = "face front";
    front.textContent = symbol;

    const back = document.createElement('div');
    back.className = "face back";

    flip.appendChild(front);
    flip.appendChild(back);
    tile.appendChild(flip);

    tile.addEventListener('click', () => onFlip(flip));
    tile.addEventListener('keydown', (e) => { if(e.key==="Enter"||e.key===" "){ e.preventDefault(); onFlip(flip);} });
    tile.tabIndex = 0; // keyboard friendly
    return tile;
  }

  function onFlip(card){
    if(lock || card.classList.contains('matched') || card.classList.contains('flipped')) return;
    card.classList.add('flipped');

    if(!first){
      first = card;
      fb("Find its pair‚Ä¶","ok");
      return;
    }

    // Second card
    lock = true;
    if(first.dataset.value === card.dataset.value){
      // Match!
      first.classList.add('matched');
      card.classList.add('matched');
      matches++;
      buildProgress();
      fb("Match! üéâ","ok");
      confettiBurst(36);

      first = null;
      lock = false;

      if(matches === totalPairs){
        setTimeout(()=>{ fb("All pairs found! üèÜ","ok"); confettiBurst(100); }, 250);
      }
    } else {
      // Not a match
      fb("Try again!","oops");
      setTimeout(()=>{
        first.classList.remove('flipped');
        card.classList.remove('flipped');
        first = null;
        lock = false;
      }, 800);
    }
  }

  function resetGame(){ newGame(); }

  function fb(msg="", cls=""){ fbEl.className = "feedback " + (cls||""); fbEl.textContent = msg; }

  function shuffle(a){
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function confettiBurst(pieces){
    confettiGlobalEl.innerHTML = "";
    const colors = ["#FF7AC8","#7ACBFF","#FFD166","#95E1D3","#C3F584"];
    for(let i=0;i<pieces;i++){
      const p = document.createElement('i');
      p.style.left = (Math.random()*96+2) + "%";
      p.style.background = colors[i%colors.length];
      p.style.transform = `translateY(0) rotate(${Math.random()*120}deg)`;
      p.style.animationDelay = (Math.random()*0.35) + "s";
      p.style.width = (8 + Math.random()*6) + "px";
      p.style.height = (10 + Math.random()*10) + "px";
      confettiGlobalEl.appendChild(p);
    }
    setTimeout(()=> confettiGlobalEl.innerHTML = "", 1800);
  }

  // init
  newGame();
</script>
</body>
</html>
